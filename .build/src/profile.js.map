{
  "version": 3,
  "sources": ["../../src/profile.js"],
  "sourcesContent": ["url = new URL(window.location.href);\nconst path = url.pathname;\nlet studentData;\nconst log = document.getElementById('log');\nconst nameHeading = document.getElementById('name-heading');\nconst gradeHeading = document.getElementById('grade-heading');\nconst pointsHeading = document.getElementById('points-heading');\nconst eventTable = document.getElementById('event-table');\nconst eventSelect = document.getElementById('event-add');\nconst eventForm = document.getElementById('event-form');\nlet rowCount = 0;\nlet optionCount = 0;\n\neventForm.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  let id = '';\n  for (let i = path.length - 1; i >= 0; i--) {\n    if (path[i]  === '/') {\n      break;\n    }\n    id += path[i];\n  }\n  const eventId = eventSelect.value;\n  const response = await fetch(`/api/students/${id}/events/${eventId}`,  {\n    method: 'POST'\n  });\n  if (response.ok) {\n    const response = document.getElementById('response');\n    response.innerHTML = 'Added event';\n    populatePage();\n  }\n});\n\npopulatePage();\n\nasync function getStudentData() {\n  let id = '';\n  for (let i = path.length - 1; i >= 0; i--) {\n    if (path[i]  === '/') {\n      break;\n    }\n    id += path[i];\n  }\n  const response = await fetch(`/api/students/${id}`);\n  if (response.ok) {\n    studentData = await response.json();\n  }\n}\n\nasync function populatePage() {\n  await getStudentData();\n  nameHeading.innerHTML = `${studentData.firstName} ${studentData.lastName}`;\n  gradeHeading.innerHTML = `Grade ${studentData.gradeLevel}`;\n  pointsHeading.innerHTML = `Points: ${studentData.points}`;\n  updateTable();\n  updateSelect();\n}\n\nasync function updateTable() {\n  const eventsAttended = studentData.events;\n  const allEvents = await gatherEventData();\n  const events = [];\n  for (let i = 0; i < eventsAttended.length; i++) {\n    for (let z = 0; z < allEvents.length; z++) {\n      if (eventsAttended[i] === allEvents[z].id) {\n        events.push(allEvents[z]);\n      }\n    }\n  }\n  for (let i = 0; i < rowCount; i++) {\n    deleteRow(1);\n  }\n  rowCount = 0;\n  for (let i = 0; i < events.length; i++) {\n    rowCount++\n    const newRow = eventTable.insertRow(i + 1);\n    const newName = newRow.insertCell(0);\n    const newPoints = newRow.insertCell(1);\n    const newID = newRow.insertCell(2);\n    newName.innerHTML = events[i].name;\n    newPoints.innerHTML = events[i].points;\n    newID.innerHTML = events[i].id;\n  }\n}\n\nasync function gatherEventData() {\n  let url = '/api/events'\n  try {\n    const eventsResponse =  await fetch(url);\n    return await eventsResponse.json();\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function updateSelect() {\n  for (let i = 0; i < optionCount; i++) {\n    deleteOption(0);\n  }\n  optionCount = 0;\n  const events = await gatherEventData();\n  for (let i = 0; i < events.length; i++) {\n    const option = document.createElement(\"option\");\n    optionCount++\n    option.text = events[i].name;\n    option.value = events[i].id;\n    eventSelect.add(option);\n  }\n}\n\nasync function deleteRow(rowIndex) {\n  eventTable.deleteRow(rowIndex);\n}\n\nasync function deleteOption(index) {\n  eventSelect.remove(eventSelect.index);\n}"],
  "mappings": "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",
  "names": ["response", "url"]
}
